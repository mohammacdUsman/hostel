<%- include('partials/header_sidebar') %>

<div class="content-wrapper">
    <div class="container" style="max-width: 900px;">
        <h2 class="fw-bold mb-4" style="font-family: 'Cinzel';">My Profile</h2>
        
        <form action="/update_profile" method="POST" enctype="multipart/form-data">
            <div class="row">
                <!-- Left Col -->
                <div class="col-md-4 text-center mb-4">
                    <div class="card border-0 shadow-sm p-4">
                        <div class="position-relative d-inline-block">
                            <img src="<%= user.profile_pic ? '/uploads/'+user.profile_pic : 'https://via.placeholder.com/150' %>" 
                                 class="rounded-circle shadow-sm" style="width: 150px; height: 150px; object-fit: cover;">
                            <label for="picInput" class="position-absolute bottom-0 end-0 bg-dark text-white rounded-circle p-2" style="cursor: pointer;">
                                <i class="bi bi-camera-fill"></i>
                            </label>
                            <input type="file" name="profile_pic" id="picInput" class="d-none">
                        </div>
                        <h4 class="mt-3 fw-bold"><%= user.name %></h4>
                        <span class="badge bg-warning text-dark"><%= user.role.toUpperCase() %></span>
                    </div>
                </div>

                <!-- Right Col -->
                <div class="col-md-8">
                    <div class="card border-0 shadow-sm p-4">
                        <h5 class="fw-bold mb-3 text-primary">Info</h5>
                        <div class="mb-3">
                            <label>Full Name</label>
                            <input type="text" name="name" class="form-control" value="<%= user.name %>" required>
                        </div>
                        <div class="mb-3">
                            <label>Email (Read Only)</label>
                            <input type="text" class="form-control bg-light" value="<%= user.email %>" readonly>
                        </div>
                        <div class="mb-3">
                            <label>Phone</label>
                            <input type="text" name="phone" class="form-control" value="<%= user.phone || '' %>">
                        </div>
                        <div class="mb-3">
                            <label>About Me</label>
                            <textarea name="about" class="form-control" rows="3"><%= user.about || '' %></textarea>
                        </div>
                        <button class="btn btn-gold float-end">Save Changes</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<%- include('partials/footer') %>